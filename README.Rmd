jsonapi
=======

```{r echo=FALSE}
knitr::opts_chunk$set(
  warning = FALSE,
  message = FALSE,
  collapse = TRUE,
  comment = "#>"
)
```

An R client for consuming APIs that follow the [jsonapi.org spec][spec].

* jsonapi home: [http://jsonapi.org/](http://jsonapi.org/)
* jsonapi spec: [http://jsonapi.org/format/](http://jsonapi.org/format/)

## Setup a jsonapi

* `git clone git@github.com:endpoints/endpoints-example.git` (or via `hub`: `hub clone endpoints/endpoints-example`)
* `cd endpoints-example`
* `npm install`
* `PORT=8088 npm start` (start with port 8088 instead of 8080, can use a different port)

Which should start up a server. Then point your browser to e.g.:

* [http://localhost:8088/v1](http://localhost:8088/v1)
* [http://localhost:8088/v1/authors](http://localhost:8088/v1/authors)
* [http://localhost:8088/v1/authors/1](http://localhost:8088/v1/authors/1)

## Install jsonapi R client

```{r}
if (!require("devtools")) {
  install.packages("devtools")
}
devtools::install_github("sckott/jsonapi")
```

```{r}
library("jsonapi")
```

## Connect

```{r}
(conn <- connect("http://localhost:8088/v1"))
```

## Get API info

Get version

```{r}
conn$version
```

Get base URL

```{r}
conn$base_url()
```

Get server status

```{r}
conn$status()
```

Get routes (not available in standard jsonapi i think)

```{r}
conn$routes()
```

## Call a route

books route

```{r}
conn$route("authors")
```

## Get a single document

First authors document

```{r}
conn$route("authors/1")
```

Sub-part under that document: `books`

```{r}
conn$route("authors/1/books")
```

A different sub-part under that document: `photos`

```{r}
conn$route("authors/1/photos")
```

[spec]: http://jsonapi.org/format/
